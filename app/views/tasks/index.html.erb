<p id="notice"><%= notice %></p>

<h1><%= t('view.tasks.index') %></h1>

<div>
  <%= form_with(model: Task.new, local: true, method: :get, url: tasks_path) do |form| %>
  <table>
    <tr>
      <td>
        <h3><%= t('view.tasks.conditional_search') %></h3>
      </td>
      <td>
        <%= form.label :name, t('view.tasks.task_name') %>
        <%= form.text_field :name, id: "search_task_name" %>
      </td>
      <td>
        <%= form.label :status, t('view.tasks.task_status') %>
        <%= form.select :status,   [t('view.tasks.task_status_not_yet_started'),t('view.tasks.task_status_started'),t('view.tasks.task_status_complete')], id: "search_task_status" %>
      </td>
      <td>
        <%= form.hidden_field :search, value: 'true' %>
        <%= form.submit t('view.tasks.search_execution'), id: "search_task" %>
      </td>
    </tr>
  </table>
  <% end %>
</div>
<div>
<table>
  <tr>
    <td><%= link_to t('view.tasks.link_to_new_task'), new_task_path %></td>
    <td colspan="3"></td>
    <td>
      <% if @order == "asc" %>
      <%   order_text = t('view.tasks.order_desc') %>
      <% else  %>
      <%   order_text = t('view.tasks.order_asc') %>
      <% end %>
      <%= link_to order_text, tasks_path(order: @order), id: "order_change" %>
    </td>
    <td><%= link_to t('view.tasks.sort_deadline_desc'), tasks_path(sort_expired: "true"), id: "order_change_deadline" %></td>
  </tr>
</table>
</div>
<table>
  <thead>
    <tr>
      <th><%= t('view.tasks.task_name') %></th>
      <th><%= t('view.tasks.task_description') %></th>
      <th><%= t('view.tasks.task_deadline') %></th>
      <th><%= t('view.tasks.task_status') %></th>
      <th><%= t('view.tasks.task_priority') %></th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @tasks.each do |task| %>
      <tr class="task_list">
        <td><%= task.name %></td>
        <td><%= task.description %></td>
        <td><%= task.deadline %></td>
        <td><%= task.status %></td>
        <td><%= t("enums.task.priority.#{task.priority}") %></td>
        <td><%= link_to t('view.tasks.link_to_show_task'), task %></td>
        <td><%= link_to t('view.tasks.link_to_edit_task'), edit_task_path(task) %></td>
        <td>
          <%= link_to t('view.tasks.link_to_delete_task'), task, method: :delete,
          data: { confirm: t('view.tasks.message_of_confirm_delete_task') } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
